<ng-template #supplierFormTemplate>
  <!-- Tabs Navigation -->
  <app-tabs
    [tabs]="tabs"
    [activeTabId]="activeTab"
    [stretch]="true"
    (tabChanged)="onTabChange($event)"
  ></app-tabs>

  <!-- Form Content -->
  <form [formGroup]="supplierForm" class="supplier-form-content">
    <!-- Tab 1: Basic Information -->
    <div class="tab-panel" *ngIf="activeTab === 'basic'">
      <div class="tab-header">
        <mat-icon>info</mat-icon>
        <h3>Company Details</h3>
      </div>

      <div class="form-grid">
        <!-- Company Name -->
        <div class="form-group">
          <app-input-text
            [config]="companyNameConfig"
            formControlName="companyName"
          ></app-input-text>
        </div>

        <!-- Trading Name -->
        <div class="form-group">
          <app-input-text
            [config]="tradingNameConfig"
            formControlName="tradingName"
          ></app-input-text>
        </div>

        <!-- Registration Number -->
        <div class="form-group">
          <app-input-text
            [config]="registrationNumberConfig"
            formControlName="registrationNumber"
          ></app-input-text>
        </div>

        <!-- Tax ID -->
        <div class="form-group">
          <app-input-text
            [config]="taxIdConfig"
            formControlName="taxId"
          ></app-input-text>
        </div>

        <!-- Category -->
        <div class="form-group">
          <label class="form-label">Category <span class="required">*</span></label>
          <app-input-dropdown
            [options]="categoryOptions"
            [config]="categoryDropdownConfig"
            (selectionChanged)="onCategoryChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Business Type -->
        <div class="form-group">
          <label class="form-label">Business Type <span class="required">*</span></label>
          <app-input-dropdown
            [options]="businessTypeOptions"
            [config]="businessTypeDropdownConfig"
            (selectionChanged)="onBusinessTypeChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Years in Business -->
        <div class="form-group">
          <app-input-text
            [config]="yearsInBusinessConfig"
            formControlName="yearsInBusiness"
          ></app-input-text>
        </div>

        <!-- Website -->
        <div class="form-group">
          <app-input-text
            [config]="websiteConfig"
            formControlName="website"
          ></app-input-text>
        </div>
      </div>
    </div>

    <!-- Tab 2: Contact & Address -->
    <div class="tab-panel" *ngIf="activeTab === 'contact'">
      <div class="tab-header">
        <mat-icon>contact_phone</mat-icon>
        <h3>Primary Contact Person</h3>
      </div>

      <div class="form-grid">
        <!-- Primary Contact -->
        <div class="form-group">
          <app-input-text
            [config]="primaryContactConfig"
            formControlName="primaryContact"
          ></app-input-text>
        </div>

        <!-- Primary Phone -->
        <div class="form-group">
          <app-input-text
            [config]="primaryPhoneConfig"
            formControlName="primaryPhone"
          ></app-input-text>
        </div>

        <!-- Primary Email -->
        <div class="form-group full-width">
          <app-input-text
            [config]="primaryEmailConfig"
            formControlName="primaryEmail"
          ></app-input-text>
        </div>
      </div>

      <div class="tab-header">
        <mat-icon>person_outline</mat-icon>
        <h3>Secondary Contact (Optional)</h3>
      </div>

      <div class="form-grid">
        <!-- Secondary Contact -->
        <div class="form-group">
          <app-input-text
            [config]="secondaryContactConfig"
            formControlName="secondaryContact"
          ></app-input-text>
        </div>

        <!-- Secondary Phone -->
        <div class="form-group">
          <app-input-text
            [config]="secondaryPhoneConfig"
            formControlName="secondaryPhone"
          ></app-input-text>
        </div>

        <!-- Secondary Email -->
        <div class="form-group full-width">
          <app-input-text
            [config]="secondaryEmailConfig"
            formControlName="secondaryEmail"
          ></app-input-text>
        </div>
      </div>

      <div class="tab-header">
        <mat-icon>location_on</mat-icon>
        <h3>Business Address</h3>
      </div>

      <div class="form-grid">
        <!-- Street Address -->
        <div class="form-group full-width">
          <app-input-text
            [config]="streetConfig"
            formControlName="street"
          ></app-input-text>
        </div>

        <!-- City -->
        <div class="form-group">
          <app-input-text
            [config]="cityConfig"
            formControlName="city"
          ></app-input-text>
        </div>

        <!-- County -->
        <div class="form-group">
          <label class="form-label">County <span class="required">*</span></label>
          <app-input-dropdown
            [options]="countyOptions"
            [config]="countyDropdownConfig"
            (selectionChanged)="onCountyChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Postal Code -->
        <div class="form-group">
          <app-input-text
            [config]="postalCodeConfig"
            formControlName="postalCode"
          ></app-input-text>
        </div>

        <!-- Country -->
        <div class="form-group">
          <app-input-text
            [config]="countryConfig"
            formControlName="country"
          ></app-input-text>
        </div>
      </div>
    </div>

    <!-- Tab 3: Business Details -->
    <div class="tab-panel" *ngIf="activeTab === 'business'">
      <div class="tab-header">
        <mat-icon>business</mat-icon>
        <h3>Business Details</h3>
      </div>

      <div class="form-grid">
        <!-- Year Established -->
        <div class="form-group">
          <app-input-text
            [config]="yearEstablishedConfig"
            formControlName="yearEstablished"
          ></app-input-text>
        </div>

        <!-- Number of Employees -->
        <div class="form-group">
          <label class="form-label">Number of Employees <span class="required">*</span></label>
          <app-input-dropdown
            [options]="numberOfEmployeesOptions"
            [config]="numberOfEmployeesDropdownConfig"
            (selectionChanged)="onNumberOfEmployeesChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Annual Turnover -->
        <div class="form-group">
          <label class="form-label">Annual Turnover <span class="required">*</span></label>
          <app-input-dropdown
            [options]="annualTurnoverOptions"
            [config]="annualTurnoverDropdownConfig"
            (selectionChanged)="onAnnualTurnoverChange($event)"
          ></app-input-dropdown>
        </div>
      </div>

      <div class="rating-section">
        <label class="form-label">Rating</label>
        <div class="star-rating">
          <span 
            *ngFor="let star of [1, 2, 3, 4, 5]" 
            class="star" 
            [class.filled]="star <= rating"
            (click)="setRating(star)"
          >
            â˜…
          </span>
          <span class="rating-text">({{ rating }}/5)</span>
        </div>
      </div>

      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="activeSupplier" />
          <span>Active supplier</span>
        </label>

        <label class="checkbox-label">
          <input type="checkbox" formControlName="preferredSupplier" />
          <span>Preferred supplier</span>
        </label>
      </div>
    </div>

    <!-- Tab 4: Financial -->
    <div class="tab-panel" *ngIf="activeTab === 'financial'">
      <div class="tab-header">
        <mat-icon>account_balance</mat-icon>
        <h3>Bank Account Details</h3>
      </div>

      <div class="form-grid">
        <!-- Bank Name -->
        <div class="form-group">
          <app-input-text
            [config]="bankNameConfig"
            formControlName="bankName"
          ></app-input-text>
        </div>

        <!-- Branch Code -->
        <div class="form-group">
          <app-input-text
            [config]="branchCodeConfig"
            formControlName="branchCode"
          ></app-input-text>
        </div>

        <!-- Account Name -->
        <div class="form-group">
          <app-input-text
            [config]="accountNameConfig"
            formControlName="accountName"
          ></app-input-text>
        </div>

        <!-- Account Number -->
        <div class="form-group">
          <app-input-text
            [config]="accountNumberConfig"
            formControlName="accountNumber"
          ></app-input-text>
        </div>

        <!-- SWIFT Code -->
        <div class="form-group full-width">
          <app-input-text
            [config]="swiftCodeConfig"
            formControlName="swiftCode"
          ></app-input-text>
        </div>
      </div>

      <div class="tab-header">
        <mat-icon>payment</mat-icon>
        <h3>Payment Terms</h3>
      </div>

      <div class="form-grid">
        <!-- Payment Terms -->
        <div class="form-group">
          <label class="form-label">Payment Terms <span class="required">*</span></label>
          <app-input-dropdown
            [options]="paymentTermsOptionsDropdown"
            [config]="paymentTermsDropdownConfig"
            (selectionChanged)="onPaymentTermsChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Currency -->
        <div class="form-group">
          <label class="form-label">Currency <span class="required">*</span></label>
          <app-input-dropdown
            [options]="currencyOptions"
            [config]="currencyDropdownConfig"
            (selectionChanged)="onCurrencyChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Credit Limit -->
        <div class="form-group full-width">
          <app-input-text
            [config]="creditLimitConfig"
            formControlName="creditLimit"
          ></app-input-text>
        </div>
      </div>
    </div>

    <!-- Tab 5: Compliance -->
    <div class="tab-panel" *ngIf="activeTab === 'compliance'">
      <div class="tab-header">
        <mat-icon>verified</mat-icon>
        <h3>Compliance & Documentation</h3>
      </div>

      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="vatRegistered" />
          <span>VAT Registered</span>
        </label>
      </div>

      <div class="form-grid">
        <!-- Business License Number -->
        <div class="form-group">
          <app-input-text
            [config]="businessLicenseNumberConfig"
            formControlName="businessLicenseNumber"
          ></app-input-text>
        </div>

        <!-- Certificate Number -->
        <div class="form-group">
          <app-input-text
            [config]="certificateNumberConfig"
            formControlName="certificateNumber"
          ></app-input-text>
        </div>
      </div>

      <div class="tab-header">
        <mat-icon>description</mat-icon>
        <h3>Documents</h3>
      </div>

      <div class="document-upload-combined">
        <div class="upload-area" *ngIf="!hasFile('businessLicense') && !hasFile('taxCertificate') && !hasFile('bankStatement')">
          <input
            type="file"
            id="documentsUpload"
            accept=".pdf,.jpg,.jpeg,.png"
            multiple
            (change)="onFileSelect($event, 'businessLicense')"
            hidden
          />
          <label for="documentsUpload" class="upload-label">
            <mat-icon>description</mat-icon>
            <span>Upload certificates, licenses, contracts</span>
            <button type="button" class="btn-choose-files">Choose Files</button>
          </label>
        </div>

        <div class="uploaded-files-list" *ngIf="hasFile('businessLicense') || hasFile('taxCertificate') || hasFile('bankStatement')">
          <div class="uploaded-file" *ngIf="hasFile('businessLicense')">
            <mat-icon>description</mat-icon>
            <span>{{ getFileName('businessLicense') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('businessLicense')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
          <div class="uploaded-file" *ngIf="hasFile('taxCertificate')">
            <mat-icon>description</mat-icon>
            <span>{{ getFileName('taxCertificate') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('taxCertificate')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
          <div class="uploaded-file" *ngIf="hasFile('bankStatement')">
            <mat-icon>description</mat-icon>
            <span>{{ getFileName('bankStatement') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('bankStatement')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
          <input
            type="file"
            id="documentsUploadMore"
            accept=".pdf,.jpg,.jpeg,.png"
            (change)="onFileSelect($event, 'taxCertificate')"
            hidden
          />
          <label for="documentsUploadMore" class="btn-add-more">
            <mat-icon>add</mat-icon>
            Add More Files
          </label>
        </div>
      </div>

      <div class="tab-header">
        <mat-icon>note</mat-icon>
        <h3>Additional Notes</h3>
      </div>

      <div class="form-grid">
        <div class="form-group full-width">
          <app-input-text
            [config]="notesConfig"
            formControlName="notes"
          ></app-input-text>
        </div>
      </div>
    </div>
  </form>
</ng-template>
