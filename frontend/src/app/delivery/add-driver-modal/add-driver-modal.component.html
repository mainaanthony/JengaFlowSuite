<ng-template #driverFormTemplate>
  <!-- Tabs Navigation -->
  <app-tabs
    [tabs]="tabs"
    [activeTabId]="activeTab"
    [stretch]="true"
    (tabChanged)="onTabChange($event)"
  ></app-tabs>

  <!-- Form Content -->
  <form [formGroup]="driverForm" class="driver-form-content">
    <!-- Personal Info Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'personal'">
      <div class="tab-header">
        <mat-icon>person</mat-icon>
        <h3>Personal Information</h3>
      </div>

      <div class="form-grid">
        <!-- First Name -->
        <div class="form-group">
          <app-input-text
            [config]="firstNameConfig"
            formControlName="firstName"
          ></app-input-text>
        </div>

        <!-- Last Name -->
        <div class="form-group">
          <app-input-text
            [config]="lastNameConfig"
            formControlName="lastName"
          ></app-input-text>
        </div>

        <!-- Email -->
        <div class="form-group">
          <app-input-text
            [config]="emailConfig"
            formControlName="email"
          ></app-input-text>
        </div>

        <!-- Phone -->
        <div class="form-group">
          <app-input-text
            [config]="phoneConfig"
            formControlName="phone"
          ></app-input-text>
        </div>

        <!-- Date of Birth -->
        <div class="form-group">
          <app-input-text
            [config]="dobConfig"
            formControlName="dateOfBirth"
          ></app-input-text>
        </div>

        <!-- ID Number -->
        <div class="form-group">
          <app-input-text
            [config]="idNumberConfig"
            formControlName="idNumber"
          ></app-input-text>
        </div>

        <!-- Address -->
        <div class="form-group full-width">
          <app-input-text
            [config]="addressConfig"
            formControlName="address"
          ></app-input-text>
        </div>

        <!-- Emergency Contact Name -->
        <div class="form-group">
          <app-input-text
            [config]="emergencyContactNameConfig"
            formControlName="emergencyContactName"
          ></app-input-text>
        </div>

        <!-- Emergency Contact Phone -->
        <div class="form-group">
          <app-input-text
            [config]="emergencyContactPhoneConfig"
            formControlName="emergencyContactPhone"
          ></app-input-text>
        </div>
      </div>
    </div>

    <!-- Employment Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'employment'">
      <div class="tab-header">
        <mat-icon>work</mat-icon>
        <h3>Employment Information</h3>
      </div>

      <div class="form-grid">
        <!-- Employee ID -->
        <div class="form-group">
          <app-input-text
            [config]="employeeIdConfig"
            formControlName="employeeId"
          ></app-input-text>
        </div>

        <!-- Hire Date -->
        <div class="form-group">
          <app-input-text
            [config]="hireDateConfig"
            formControlName="hireDate"
          ></app-input-text>
        </div>

        <!-- Employment Type -->
        <div class="form-group">
          <label class="form-label">Employment Type <span class="required">*</span></label>
          <app-input-dropdown
            [options]="employmentTypeOptions"
            [config]="employmentTypeDropdownConfig"
            (selectionChanged)="onEmploymentTypeChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Monthly Salary -->
        <div class="form-group">
          <app-input-text
            [config]="monthlySalaryConfig"
            formControlName="monthlySalary"
          ></app-input-text>
        </div>

        <!-- Department -->
        <div class="form-group">
          <label class="form-label">Department <span class="required">*</span></label>
          <app-input-dropdown
            [options]="departmentOptions"
            [config]="departmentDropdownConfig"
            (selectionChanged)="onDepartmentChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Supervisor -->
        <div class="form-group">
          <label class="form-label">Supervisor</label>
          <app-input-dropdown
            [options]="supervisorOptions"
            [config]="supervisorDropdownConfig"
            (selectionChanged)="onSupervisorChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Status -->
        <div class="form-group full-width">
          <label class="form-label">Status <span class="required">*</span></label>
          <app-input-dropdown
            [options]="statusOptions"
            [config]="statusDropdownConfig"
            (selectionChanged)="onStatusChange($event)"
          ></app-input-dropdown>
        </div>
      </div>
    </div>

    <!-- License & Vehicle Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'license'">
      <div class="tab-header">
        <mat-icon>local_shipping</mat-icon>
        <h3>License & Vehicle Information</h3>
      </div>

      <div class="form-grid">
        <!-- License Number -->
        <div class="form-group">
          <app-input-text
            [config]="licenseNumberConfig"
            formControlName="licenseNumber"
          ></app-input-text>
        </div>

        <!-- License Class -->
        <div class="form-group">
          <label class="form-label">License Class</label>
          <app-input-dropdown
            [options]="licenseClassOptions"
            [config]="licenseClassDropdownConfig"
            (selectionChanged)="onLicenseClassChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- License Expiry Date -->
        <div class="form-group">
          <app-input-text
            [config]="licenseExpiryDateConfig"
            formControlName="licenseExpiryDate"
          ></app-input-text>
        </div>

        <!-- Assigned Vehicle -->
        <div class="form-group">
          <label class="form-label">Assigned Vehicle</label>
          <app-input-dropdown
            [options]="vehicleOptions"
            [config]="vehicleDropdownConfig"
            (selectionChanged)="onVehicleChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Vehicle Type -->
        <div class="form-group">
          <label class="form-label">Vehicle Type</label>
          <app-input-dropdown
            [options]="vehicleTypeOptions"
            [config]="vehicleTypeDropdownConfig"
            (selectionChanged)="onVehicleTypeChange($event)"
          ></app-input-dropdown>
        </div>

        <!-- Max Deliveries Per Day -->
        <div class="form-group">
          <app-input-text
            [config]="maxDeliveriesConfig"
            formControlName="maxDeliveriesPerDay"
          ></app-input-text>
        </div>
      </div>
    </div>

    <!-- Documents Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'documents'">
      <div class="tab-header">
        <mat-icon>upload_file</mat-icon>
        <h3>Document Upload</h3>
      </div>

      <div class="upload-grid">
        <!-- Profile Photo -->
        <div class="upload-box">
          <div class="upload-label">Profile Photo</div>
          <div class="upload-area" *ngIf="!hasFile('profilePhoto')">
            <mat-icon>upload</mat-icon>
            <p>Upload photo</p>
            <input
              type="file"
              id="profilePhoto"
              accept="image/*"
              (change)="onFileSelect($event, 'profilePhoto')"
              hidden
            />
            <label for="profilePhoto" class="btn-choose">Choose File</label>
          </div>
          <div class="file-selected" *ngIf="hasFile('profilePhoto')">
            <mat-icon>check_circle</mat-icon>
            <span>{{ getFileName('profilePhoto') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('profilePhoto')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>

        <!-- ID Copy -->
        <div class="upload-box">
          <div class="upload-label">ID Copy</div>
          <div class="upload-area" *ngIf="!hasFile('idCopy')">
            <mat-icon>upload</mat-icon>
            <p>Upload ID copy</p>
            <input
              type="file"
              id="idCopy"
              accept="image/*,.pdf"
              (change)="onFileSelect($event, 'idCopy')"
              hidden
            />
            <label for="idCopy" class="btn-choose">Choose File</label>
          </div>
          <div class="file-selected" *ngIf="hasFile('idCopy')">
            <mat-icon>check_circle</mat-icon>
            <span>{{ getFileName('idCopy') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('idCopy')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>

        <!-- License Copy -->
        <div class="upload-box">
          <div class="upload-label">License Copy</div>
          <div class="upload-area" *ngIf="!hasFile('licenseCopy')">
            <mat-icon>upload</mat-icon>
            <p>Upload license copy</p>
            <input
              type="file"
              id="licenseCopy"
              accept="image/*,.pdf"
              (change)="onFileSelect($event, 'licenseCopy')"
              hidden
            />
            <label for="licenseCopy" class="btn-choose">Choose File</label>
          </div>
          <div class="file-selected" *ngIf="hasFile('licenseCopy')">
            <mat-icon>check_circle</mat-icon>
            <span>{{ getFileName('licenseCopy') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('licenseCopy')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>

        <!-- Contract -->
        <div class="upload-box">
          <div class="upload-label">Contract</div>
          <div class="upload-area" *ngIf="!hasFile('contract')">
            <mat-icon>upload</mat-icon>
            <p>Upload signed contract</p>
            <input
              type="file"
              id="contract"
              accept=".pdf,.doc,.docx"
              (change)="onFileSelect($event, 'contract')"
              hidden
            />
            <label for="contract" class="btn-choose">Choose File</label>
          </div>
          <div class="file-selected" *ngIf="hasFile('contract')">
            <mat-icon>check_circle</mat-icon>
            <span>{{ getFileName('contract') }}</span>
            <button type="button" class="btn-remove" (click)="removeFile('contract')">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div class="form-grid">
        <!-- Additional Notes -->
        <div class="form-group full-width">
          <app-input-text
            [config]="additionalNotesConfig"
            formControlName="additionalNotes"
          ></app-input-text>
        </div>
      </div>
    </div>
  </form>
</ng-template>
