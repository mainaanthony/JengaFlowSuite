<div class="branches-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Branch Management</h1>
      <p>Manage branch locations, staff, and performance</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="stockTransfer()">
        <span class="material-icons">compare_arrows</span>
        Stock Transfer
      </button>
      <button class="btn-primary" (click)="addBranch()">
        <span class="material-icons">add</span>
        Add Branch
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats">
      <div class="stat-header">
        <h3>{{ stat.label }}</h3>
        <span class="material-icons stat-icon">{{ stat.icon }}</span>
      </div>
      <div class="stat-value">
        {{ stat.value }}
      </div>
      <div class="stat-delta" *ngIf="stat.delta !== undefined" [ngClass]="getDeltaClass(stat.delta)">
        <span class="material-icons">{{ stat.delta > 0 ? 'trending_up' : stat.delta < 0 ? 'trending_down' : 'remove' }}</span>
        {{ Math.abs(stat.delta) }} vs last month
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs-container">
    <div class="tabs">
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'allBranches'"
        (click)="setActiveTab('allBranches')">
        All Branches
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'performance'"
        (click)="setActiveTab('performance')">
        Performance
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'inventory'"
        (click)="setActiveTab('inventory')">
        Inventory Distribution
      </button>
    </div>
  </div>

  <!-- TAB 1: All Branches -->
  <div class="tab-content" *ngIf="activeTab === 'allBranches'">
    <!-- Branch Directory Table -->
    <div class="section">
      <div class="section-header">
        <h2>Branch Directory</h2>
        <p>Manage all branch locations and details</p>
      </div>

      <app-table
        [columns]="branchColumns"
        [rows]="filteredBranches"
        [actions]="branchActions"
        [showSearch]="true"
        [showFilter]="true"
        searchPlaceholder="Search branches..."
        (actionTriggered)="onTableAction($event)"
        (searchChanged)="onTableSearch($event)"
        (filterClicked)="onFilter()">
      </app-table>
    </div>
  </div>

  <!-- TAB 2: Performance -->
  <div class="tab-content" *ngIf="activeTab === 'performance'">
    <div class="performance-container">
      <!-- Revenue by Branch -->
      <div class="section">
        <div class="section-header">
          <h2>
            <span class="material-icons">trending_up</span>
            Revenue by Branch
          </h2>
          <p>Monthly revenue performance</p>
        </div>

        <div class="performance-list">
          <div class="performance-item" *ngFor="let perf of performanceData">
            <div class="perf-branch">
              <strong>{{ perf.branch }}</strong>
              <span class="perf-manager">{{ perf.manager }}</span>
            </div>
            <div class="perf-revenue">{{ perf.revenue }}</div>
            <div class="perf-delta" [ngClass]="perf.deltaPercent > 0 ? 'positive' : 'negative'">
              {{ perf.deltaPercent > 0 ? '+' : '' }}{{ perf.deltaPercent }}%
            </div>
          </div>
        </div>
      </div>

      <!-- Staff Distribution -->
      <div class="section">
        <div class="section-header">
          <h2>
            <span class="material-icons">group</span>
            Staff Distribution
          </h2>
          <p>Staff allocation across branches</p>
        </div>

        <div class="staff-list">
          <div class="staff-item" *ngFor="let staff of staffAllocation">
            <div class="staff-branch">
              <strong>{{ staff.branch }}</strong>
              <span class="staff-established">Established: {{ staff.established }}</span>
            </div>
            <div class="staff-count">{{ staff.staff }} staff</div>
            <span class="status-badge" [ngClass]="getStatusClass(staff.status)">
              {{ staff.status }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 3: Inventory Distribution -->
  <div class="tab-content" *ngIf="activeTab === 'inventory'">
    <div class="inventory-container">
      <div class="section">
        <div class="section-header">
          <h2>
            <span class="material-icons">inventory_2</span>
            Inventory Distribution
          </h2>
          <p>Stock levels and distribution across branches</p>
        </div>

        <div class="empty-state">
          <div class="empty-icon">
            <span class="material-icons">inventory_2</span>
          </div>
          <h3>Inventory Management</h3>
          <p>View stock levels, manage transfers, and track inventory across all branches</p>
          <button class="btn-primary">
            <span class="material-icons">visibility</span>
            View Inventory
          </button>
          <button class="btn-secondary">
            <span class="material-icons">swap_horiz</span>
            Transfer Stock
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
